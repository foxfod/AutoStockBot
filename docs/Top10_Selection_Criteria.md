# 🏆 Top 10 종목 선정 기준 (Ver 2.3)

본 문서는 `app/core/selector.py` 및 `ai_analyzer.py`에 적용된 **KR/US Top 10 종목 선정 로직**을 정리한 것입니다.

---

## 📅 개요 (Overview)

Top 10 선정은 **"오늘 어떤 종목이 시장을 주도할 것인가?"**를 예측하는 **Pre-Market (장전) 분석** 과정입니다.
단순한 기술적 지표(차트)만 보는 것이 아니라, **시장 상황(Market Context), 경제 뉴스, 트렌드**를 종합적으로 고려하여 선정합니다.

*   **실행 시점**: 매일 장 시작 30분 전 (자동) 또는 사용자가 '갱신' 버튼을 눌렀을 때 (수동)
*   **핵심 목표**: 당일 상승 확률이 높은 주도주(Leader Stock) 발굴

---

## 1. 🌍 시장 상황 분석 (Market Context)

AI가 개별 종목을 분석하기에 앞서, 먼저 **거시 경제 및 시장 분위기**를 파악합니다.

*   **분석 대상**: 주요 지수(S&P 500, NASDAQ, KOSPI), 환율, 금리, 유가, VIX(공포지수) 등
*   **판단 결과**:
    *   📈 **Bullish (강세장)**: 공격적인 성장주, 모멘텀 주식 선호
    *   📉 **Bearish (약세장)**: 보수적 접근, 방어주 선호, 혹은 저점 매수(Dip Buying) 기회 탐색
    *   😐 **Neutral (횡보장)**: 개별 호재가 있는 종목 위주 선별

---

## 2. 🔍 후보군 추출 (Candidates)

### 🇰🇷 한국 주식 (KR)
- **기준**: 전일 거래량 상위 & 뉴스 트렌드 종목
- **제외**: ETF/ETN/스팩 등 파생상품 제외

### 🇺🇸 미국 주식 (US)
- **기준**: **Mega Cap Tech 및 주요 우량주** 50여 개 (NVDA, TSLA, MSFT 등)
- **제외**: ETF (사용자 요청)

---

## 3. 🛡️ 1차 기술적 필터 (Technical Filter)

명백히 위험한 종목을 제외하기 위한 최소한의 안전장치입니다.

| 지표 | 기준 (탈락 조건) | 설명 |
| :--- | :--- | :--- |
| **RSI 과열** | **75 이상** | 이미 너무 많이 오른 상태 (고점 위험) |
| **급등 부담** | **+20% 이상** | 당일/전일 이미 폭등하여 추격 매수 위험이 큰 경우 |
| **하락 추세** | **Trend DOWN & RSI ≥ 50** | 하락 추세이면서 과매도 상태도 아닌 애매한 경우 (RSI < 50이면 저점 매수로 통과) |

---

## 4. 🤖 2차 AI 심층 분석 (Integrated Scoring)

**시장 상황 + 뉴스 + 기술적 지표**를 AI(LLM)에게 제공하여 종합 점수(0~100점)를 매깁니다.

### 📝 AI 프롬프트 주요 지침
1.  **시장 상황 반영**: 강세장이면 모멘텀에 가산점, 약세장이면 실적/방어력 중시.
2.  **뉴스/재료 분석**: 단순 차트상 흐름보다 **강력한 호재(Earnings Surprise, 계약 체결 등)**가 있는지 확인.
3.  **저점 매수(Dip Buying)**: 우량주가 일시적 하락(Pullback) 시 매수 기회로 포착.

- **선정 커트라인**: **55점 이상**
    - 80점 이상: 강력 추천 (Strong Buy)
    - 60~79점: 매수 고려 (Buy/Watch)
    - 55~59점: 관망/소액 접근 (Weak Buy)

---

## 5. 📊 결과 활용

선정된 상위 10개 종목은:
1.  대시보드 Top 10 리스트에 등재됩니다.
2.  장중 봇이 이 종목들을 실시간 감시하며, 구체적인 진입 타점(Scalping Logic)이 올 때 매수를 실행합니다.
