# 🤖 AI Scalping Bot 통합 가이드 (Integrated Edition)

이 문서는 **한국(KR)**과 **미국(US)** 주식 시장을 모두 커버하는 24시간 자동 매매 봇의 통합 매뉴얼입니다.

## 1. 운영 스케줄 (24/7)

시스템은 하루를 **2개의 세션**으로 나누어 운영합니다.

### 🇰🇷 한국장 (KR Session)
- **시간**: 08:30 ~ 15:30 (KST)
- **대상**: 코스피/코스닥 유동성 상위 종목 (거래량 기준 20위+ 정밀 분석)
- **활동**:
    - 08:40: 스캔 시작 (10분 주기)
    - 09:00: 매매 시작
    - 15:15: **전량 매도 (청산)**
    - 15:30: 리포트 전송

### 🇺🇸 미국장 (US Session)
- **시간**: 22:00 ~ 05:00 (KST)
- **대상**: 소액 계좌 친화적 우량주 & 성장주 (엔비디아, 테슬라, 팔란티어 등)
- **활동**:
    - 22:10: 스캔 시작 (10분 주기)
    - 22:30: 매매 시작
    - 04:45: **전량 매도 (청산)**
    - 05:00: 리포트 전송

---

## 2. 최신 업데이트 기능 (Updates - 2026.02) ✨

### 📡 무한 발굴 모드 (Infinite Scan)
*   **끝까지 찾습니다:** 기존에는 상위 5개만 분석하고 종료했으나, 이제 **매수할 종목이 나올 때까지** 후보 전체를 20위권 밖까지 계속 분석합니다.
*   **차순위 즉시 매수:** 1순위 후보가 건너뛰어지면(Skip), 즉시 다음 순위 후보를 매수하여 슬롯을 채웁니다. (빈손 복귀 방지)

### 💧 물타기/불타기 전략 (Add-on Buy)
*   **추가 매수:** 이미 보유 중인 종목이 선정되었을 때, 수익률이 **3% 미만**이라면 추가 매수를 진행하여 평단가를 관리합니다.
*   **금액 설정:** 공격적인 투자를 방지하기 위해 **현재 보유 현금의 1/3 (약 33%)**만 투입합니다.
    *   예: 현금 300만원 -> 100만원 추가 매수.

### 💰 자산 배분 최적화 (Dynamic Allocation)
*   **한국장 (KR):** 최대 **3종목** 집중 투자.
    *   매수 금액 = `보유 현금 / 남은 슬롯 수` 정확 배분.
    *   3번째(마지막) 슬롯은 남은 현금을 모두 투입(`All-in`)하여 자투리 현금을 최소화합니다.
*   **오류 해결:** 연속 매수 시 주문 가능 금액 초과 오류를 해결했습니다.

### 📢 리포트 강화
*   **선정/탈락 사유:** "AI 점수 45점 (탈락) - 사유: 상승 모멘텀 부족" 등 상세한 분석 결과를 텔레그램으로 제공합니다.
*   **진행 상황 중계:** "현재 6~10위 분석 중...", "기술적 분석 통과 0개" 등 매 단계를 실시간으로 중계합니다.

### 🚀 수익 극대화 (Trailing Stop)
*   목표 수익률(3%) 도달 시 바로 팔지 않고 **상승세를 따라갑니다.**
*   **최고점에서 -1%** 하락 시에만 매도하여 수익폭을 최대로 키웁니다.
    *   예: +3% 돌파 -> +5% -> +10% -> +9%에서 매도 (결과: +9% 수익)

### ☁️ 클라우드 배포
*   **원클릭 배포:** `deploy.bat` 실행 시, 서버 코드 업데이트가 한 번에 완료됩니다. (자세한 내용은 `docs/aws_guide.md` 참조)

---

## 3. 실행 방법

PC 또는 서버에서 아래 명령어로 실행합니다.

```bash
python main_auto_trade.py
```

> [!TIP]
> **미국 주식 주의사항**: 소액($500 이하) 운용 시, 엔비디아($130+)나 테슬라 같은 고가 종목은 매수가 불가능할 수 있습니다. 이 경우 SOXL($30~), TQQQ 등 **ETF** 위주로 거래됩니다.
